<?php

use Drupal\Core\Form\FormStateInterface;

/**
 * Implements hook_theme().
 */
function dhsc_site_theme() {
  return [
    'social_media_links' => [
      'variables' => [
        'social_links' => [],
      ],
    ],
    'search_form' => [
      'variables' => [
        'items' => [],
      ],
    ],
    'featured_links' => [
      'variables' => [
        'items' => [],
      ],
    ],
    'footer_branding' => [
      'variables' => [
        'logo' => null,
        'variant' => null,
        'site_slogan' => null,
        'site_name' => null
      ],
    ],
    'site_copyright' => [
      'variables' => [
        'text' => null,
      ],
    ],
    'footer_contact' => [
      'variables' => [
        'link' => null,
        'phone' => null,
      ],
    ],
  ];
}

/**
 * Implements hook_form_alter().
 *
 * @param [type] $form
 * @param FormStateInterface $form_state
 * @param [type] $form_id
 */
function dhsc_site_form_views_exposed_form_alter(&$form, FormStateInterface $form_state, $form_id) {
  $displayId = $form_state->get('view')->getDisplay()->display['id'];
  if ($displayId == 'dhsc_search_page') {
    $form['search']['#attributes']['placeholder'] = t('Search');
    $form['search']['#attributes']['x-model'] = 'searchInputValue';
    $form['search']['#attributes']['class'][] = 'o-search-page-search-form__submit-button';

    // Reset search input button
    $form['search']['#children']['reset'] = [
      '#type' => 'inline_template',
      '#template' => '<button type="button" x-show="searchInputValue !== \'\'" @click="searchInputValue = \'\'" class="o-search-page-search-form__reset-button button">'
      . t('Clear input')
      . '</button>',
    ];
  }
}
